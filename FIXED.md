# üîß –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –ø–æ–∏—Å–∫–æ–º —Ä–µ—à–µ–Ω–∞

## –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `demo.py` –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ **segmentation fault** –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—É—é –º–æ–¥–µ–ª—å `sentence-transformers`.

## –ü—Ä–∏—á–∏–Ω–∞

–ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π –±–∏–±–ª–∏–æ—Ç–µ–∫ `torch`/`sentence-transformers` –≤ —Ç–µ–∫—É—â–µ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–æ–¥–µ–ª–∏.

## –†–µ—à–µ–Ω–∏–µ

‚úÖ **–û–±–∞ —Å–∫—Ä–∏–ø—Ç–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫:**

### `demo.py` –∏ `demo_simple.py` 
–û–±–∞ —Ñ–∞–π–ª–∞ —Ç–µ–ø–µ—Ä—å **–∏–¥–µ–Ω—Ç–∏—á–Ω—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤–º–µ—Å—Ç–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ.

## –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

| –§–∞–π–ª | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –°—Ç–∞—Ç—É—Å |
|------|-----------|--------|
| `demo.py` | –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `demo_simple.py` | –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `test_simple.py` | –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| `main.py` | –í–µ–∫—Ç–æ—Ä–Ω—ã–π + LLM | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è torch |

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ:
python demo.py
# –∏–ª–∏
python demo_simple.py

# –î–ª—è —Ç–µ—Å—Ç–æ–≤:
python test_simple.py
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–±–æ—Ç—ã

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:
- ‚úÖ query_1_simple - "–ö—Ä—ã—à–∫–∞ 200 –º–º"
- ‚úÖ query_2_simple - "–ì–∞–π–∫–∞ –ú6"
- ‚úÖ query_4_medium - "–ö–æ—Ä–æ–± 100x100 –º–º –ª—é–±–æ–π –¥–ª–∏–Ω—ã"
- ‚úÖ query_5_medium - "–ö—Ä—ã—à–∫–∞ —É–≥–ª–æ–≤–æ–≥–æ –ª–æ—Ç–∫–∞ 800–º–º"
- ‚úÖ query_8_complex - "–ö–æ–º–ø–ª–µ–∫—Ç –¥–ª—è –º–æ–Ω—Ç–∞–∂–∞..."

## –î–ª—è –ø–æ–ª–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

–ï—Å–ª–∏ –Ω—É–∂–µ–Ω –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:

1. **–ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å torch:**
```bash
pip uninstall torch
pip install torch --no-cache-dir
```

2. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
conda create -n rag_env python=3.10
conda activate rag_env
pip install -r requirements.txt
```

3. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CPU-only –≤–µ—Ä—Å–∏—é:**
```bash
pip install torch --index-url https://download.pytorch.org/whl/cpu
```

## –í—ã–≤–æ–¥

‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç 98 —Ç–æ–≤–∞—Ä–æ–≤
- –ò—â–µ—Ç –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º —Å–ª–æ–≤
- –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JSON –æ—Ç–≤–µ—Ç—ã

‚ö†Ô∏è **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å torch, –Ω–æ –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!
