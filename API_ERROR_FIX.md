# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 500 –≤ FastAPI

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
```
INFO: 127.0.0.1:59226 - "POST /search HTTP/1.1" 500 Internal Server Error
–û—à–∏–±–∫–∞ FastAPI: Error: FastAPI error: 500
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
–û—à–∏–±–∫–∞ –±—ã–ª–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤ –º–æ–¥–µ–ª–∏ `SearchRequest` –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ –ø–æ–ª–µ `complexity`, –Ω–æ –∫–æ–¥ –ø—ã—Ç–∞–ª—Å—è –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `complexity` –≤ –º–æ–¥–µ–ª—å `SearchRequest`
```python
class SearchRequest(BaseModel):
    """–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∏—Å–∫"""
    query: str = Field(..., description="–ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å", example="–ì–∞–π–∫–∞ –ú6")
    top_k: int = Field(10, description="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤", ge=1, le=50)
    use_decomposition: bool = Field(True, description="–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—é –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤")
    complexity: Optional[str] = Field(None, description="–°–ª–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∞ (simple/medium/complex)")
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã API
- ‚úÖ FastAPI endpoint `/search` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Express endpoint `/api/chat` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç FastAPI –Ω–∞–ø—Ä—è–º—É—é:
```bash
curl -X POST http://localhost:8000/search \
  -H "Content-Type: application/json" \
  -d '{"query":"–≥–∞–π–∫–∞","top_k":5,"use_decomposition":true}'
```

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ Express:
```bash
curl -X POST http://localhost:5000/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message":"–≥–∞–π–∫–∞ –ú6"}'
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ **FastAPI** - –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **Express** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FastAPI —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —á–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **CSV –∑–∞–≥—Ä—É–∑–∫–∞** - —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `src/api/main.py` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `complexity` –≤ `SearchRequest`

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
