# üéâ RAG-—Å–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### –ü–æ–ª–Ω—ã–π MVP —Å RAG-–ø–æ–¥—Ö–æ–¥–æ–º –≤–∫–ª—é—á–∞–µ—Ç:

1. **src/data_loader.py** - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ preprocessing –¥–∞–Ω–Ω—ã—Ö
   - –ü–∞—Ä—Å–∏–Ω–≥ CSV —Ñ–∞–π–ª–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ü–µ–Ω
   - –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤

2. **src/search_engine.py** - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
   - FAISS –∏–Ω–¥–µ–∫—Å
   - Sentence-transformers —ç–º–±–µ–¥–¥–∏–Ω–≥–∏
   - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É

3. **src/llm_generator.py** - LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Qwen3-4B
   - –£–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

4. **src/query_processor.py** - –ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
   - –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ (simple/medium/complex)
   - –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü–æ–¥–±–æ—Ä –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤

5. **src/cost_calculator.py** - –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
   - –ü–∞—Ä—Å–∏–Ω–≥ —Ü–µ–Ω
   - –°—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

6. **main.py** - CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
   - –û–¥–∏–Ω–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ JSON

7. **test_queries.py** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
8. **demo.py** - –ë—ã—Å—Ç—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
9. **README.md** - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
10. **quickstart.sh** - –°–∫—Ä–∏–ø—Ç –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—ã—Å—Ç—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è (–±–µ–∑ LLM)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install torch sentence-transformers faiss-cpu pandas

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–º–æ
python demo.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Å LLM)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É
python main.py "–ì–∞–π–∫–∞ –ú6"

# –ò–ª–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
python main.py --interactive
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã

```bash
python test_queries.py
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
```bash
python main.py "–ö—Ä—ã—à–∫–∞ 200 –º–º"
```

–û—Ç–≤–µ—Ç:
```json
{
  "complexity": "simple",
  "response": {
    "found_items": [
      {
        "name": "–ö—Ä—ã—à–∫–∞ 200 –º–º, L=2000 –º–º...",
        "cost": "45 131 —Ä—É–±."
      }
    ],
    "items_count": 1,
    "total_cost": "45 131 —Ä—É–±."
  }
}
```

### –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
```bash
python main.py "–ö–æ–º–ø–ª–µ–∫—Ç –¥–ª—è –º–æ–Ω—Ç–∞–∂–∞ –∫–æ—Ä–æ–±–∞ 200x200: –∫–æ—Ä–æ–±, –∫—Ä—ã—à–∫–∞, –≤–∏–Ω—Ç—ã –∏ –≥–∞–π–∫–∏"
```

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç, —á—Ç–æ —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∑–∞–ø—Ä–æ—Å
2. –ù–∞–π–¥–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. –†–∞—Å—Å—á–∏—Ç–∞–µ—Ç –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### RAG –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Retrieval**: –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ —Å FAISS
- **Augmentation**: –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM
- **Generation**: –£–º–Ω—ã–π –æ—Ç–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤

### –£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **Simple**: "–ì–∞–π–∫–∞ –ú6" ‚Üí –ø—Ä—è–º–æ–π –ø–æ–∏—Å–∫
- **Medium**: "–ö–æ—Ä–æ–± –ª—é–±–æ–π –¥–ª–∏–Ω—ã" ‚Üí –ø–æ–∏—Å–∫ + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- **Complex**: "–ö–æ–º–ø–ª–µ–∫—Ç –¥–ª—è –º–æ–Ω—Ç–∞–∂–∞" ‚Üí –ø–æ–∏—Å–∫ + LLM

### –ì–∏–±–∫–æ—Å—Ç—å
- –†–∞–±–æ—Ç–∞–µ—Ç —Å LLM –∏ –±–µ–∑ –Ω–µ–≥–æ
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
test/
‚îú‚îÄ‚îÄ src/                      # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py       
‚îÇ   ‚îú‚îÄ‚îÄ search_engine.py     
‚îÇ   ‚îú‚îÄ‚îÄ llm_generator.py     
‚îÇ   ‚îú‚îÄ‚îÄ query_processor.py   
‚îÇ   ‚îî‚îÄ‚îÄ cost_calculator.py   
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ index/               # –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ main.py                  # CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ demo.py                  # –ë—ã—Å—Ç—Ä–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ test_queries.py          # –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ requirements.txt         # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICKSTART.md           # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ quickstart.sh           # Bash —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –î–ª—è –±—ã—Å—Ç—Ä–æ–π —Ä–∞–±–æ—Ç—ã (–±–µ–∑ LLM)
```bash
python main.py "–∑–∞–ø—Ä–æ—Å" --no-llm
```

### –ú–µ–Ω—å—à–∞—è –º–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
```bash
python main.py "–∑–∞–ø—Ä–æ—Å" --embedding "intfloat/multilingual-e5-small"
```

### –°–≤–æ—è –º–æ–¥–µ–ª—å Qwen
```bash
python main.py "–∑–∞–ø—Ä–æ—Å" --model "/path/to/your/qwen"
```

## üéì –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫)
```
CSV –¥–∞–Ω–Ω—ã–µ ‚Üí Preprocessing ‚Üí –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ ‚Üí FAISS –∏–Ω–¥–µ–∫—Å
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
```
–ó–∞–ø—Ä–æ—Å ‚Üí –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ ‚Üí –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ ‚Üí LLM —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç
```

### 3. –ü—Ä–∏–º–µ—Ä –¥–ª—è "–ö–æ–º–ø–ª–µ–∫—Ç –¥–ª—è –º–æ–Ω—Ç–∞–∂–∞"
```
1. –ó–∞–ø—Ä–æ—Å –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è: —Å–ª–æ–∂–Ω–æ—Å—Ç—å = complex
2. –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç ~20 –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
3. LLM –≤—ã–±–∏—Ä–∞–µ—Ç –Ω—É–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
   - –ö–æ—Ä–æ–±
   - –ö—Ä—ã—à–∫–∞  
   - –í–∏–Ω—Ç—ã
   - –ì–∞–π–∫–∏
4. –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å
5. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –æ—Ç–≤–µ—Ç
```

## üí° –°–æ–≤–µ—Ç—ã –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–π–º–µ—Ç –≤—Ä–µ–º—è** - —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –∏–Ω–¥–µ–∫—Å
2. **–ò–Ω–¥–µ–∫—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** - —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ –±—É–¥—É—Ç –±—ã—Å—Ç—Ä—ã–º–∏
3. **–ë–µ–∑ LLM –±—ã—Å—Ç—Ä–µ–µ** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-llm`
4. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º** - —É–¥–æ–±–µ–Ω –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

## üêõ Troubleshooting

### –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ pandas/torch
```bash
pip install pandas torch
```

### –û—à–∏–±–∫–∞ faiss
```bash
pip install faiss-cpu
```

### –ú–æ–¥–µ–ª—å Qwen –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª—å –≤ `./Qwen/Qwen3-4B-Instruct-2507/`
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-llm` –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ LLM

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--no-llm`
- –ò–ª–∏ –º–µ–Ω—å—à—É—é –º–æ–¥–µ–ª—å: `--embedding "intfloat/multilingual-e5-small"`

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏:
1. Fine-tune –º–æ–¥–µ–ª–∏ –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö
2. –î–æ–±–∞–≤–∏—Ç—å BM25 –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
3. –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è LLM

### –î–ª—è production:
1. –î–æ–±–∞–≤–∏—Ç—å API (Flask/FastAPI)
2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
4. Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è

### –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è:
1. PostgreSQL + pgvector –≤–º–µ—Å—Ç–æ FAISS
2. Async –æ–±—Ä–∞–±–æ—Ç–∫–∞
3. –ë–∞—Ç—á–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤

## üéä –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –Ω–∞ –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.

–ó–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
python demo.py
```

–ò–ª–∏ —Å—Ä–∞–∑—É –Ω–∞—á–Ω–∏—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å:
```bash
python main.py --interactive
```

–£–¥–∞—á–∏! üöÄ
